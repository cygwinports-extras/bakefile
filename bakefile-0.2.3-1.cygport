inherit python

HOMEPAGE="http://bakefile.sourceforge.net/"
SRC_URI=mirror://sourceforge/${PN}/${P}.tar.gz

DIFF_EXCLUDES="bottlenecks.py bottlenecks_wrap.c" # generated by swig

src_compile() {
	cd ${S}
	./bootstrap || error "bootstrap failed"
	cd ${B}
	cygconf
	cygmake \
		_bottlenecks_la_LDFLAGS='-module -avoid-version -no-undefined' \
		_bottlenecks_la_LIBADD="${LIBPYTHON}"
}

src_install() {
	cd ${B}
	cyginstall

	dodir /usr/share/doc/${P}
	cp -r ${S}/doc/html ${D}/usr/share/doc/${P}/
}
